<?php       /*     Plugin Name: Business Details    Plugin URI: https://www.creare.co.uk/    Description: A simple plugin for adding business details.    Author: Matt Williamson    Version: 0.0.2    Author URI: http://www.creare.co.uk/    */   	/*  Copyright 2013  WILLIAMSON, CREAREGROUP  (email : matt.w@creare.co.uk)    This program is free software; you can redistribute it and/or modify    it under the terms of the GNU General Public License, version 2, as     published by the Free Software Foundation.    This program is distributed in the hope that it will be useful,    but WITHOUT ANY WARRANTY; without even the implied warranty of    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the    GNU General Public License for more details.    You should have received a copy of the GNU General Public License    along with this program; if not, write to the Free Software    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA		---------------------------------------------------------------------------	CONTENTS	---------------------------------------------------------------------------		1 - Class		---------------------------------------------------------------------------		*/$mw_business_details = new mw_business_details();/*---------------------------------------------------------------------------1 - Class---------------------------------------------------------------------------*/class mw_business_details {    public function __construct() {        if ( is_admin() ){             add_action('admin_menu', array(&$this, 'mw_admin_actions'));               add_action('admin_init', array(&$this, 'mw_admin_init'));        }        add_action('init', array(&$this, 'mw_init'));        add_filter('plugin_action_links', array(&$this, 'settings_link'), 10, 2);        }	    public function mw_admin_actions() {         $page = add_menu_page("Business Details", "Business Details", "administrator", "mw-business-details", array(&$this, "mw_admin"));    }    public function mw_admin_init() {        $this->mw_theme_options_init();        $this->mw_business_details_admin_assets();        $this->showAdminMessages();    }        public function mw_admin() {          include('mw-business-details-settings.php');              }    public function showAdminMessages()    {      $plugin_messages = array();      include_once( ABSPATH . 'wp-admin/includes/plugin.php' );      // Download the Yoast WordPress SEO plugin      if(!is_plugin_active( 'wordpress-seo/wp-seo.php' ))      {        $plugin_messages[] = 'This theme requires you to install the Yoast WordPress SEO plugin, <a href="http://wordpress.org/extend/plugins/wordpress-seo/">download it from here</a>.';      }      if(count($plugin_messages) > 0)      {        echo '<div id="message" class="error">';          foreach($plugin_messages as $message)          {            echo '<p><strong>'.$message.'</strong></p>';          }        echo '</div>';      }          }    function mw_init() {        $imgWidth = get_option('imgWidth');        $imgHeight = get_option('imgWidth');        add_image_size( 'mw-logo-size', $imgWidth, $imgHeight, true );        include( 'mw-business-details-shortcodes.php' );        $mw_business_details_shortcodes = new mw_business_details_shortcodes();    }	    function mw_business_details_admin_assets() {        if (isset($_GET['page']) && $_GET['page'] == 'mw-business-details') {            wp_enqueue_media();            // styles            wp_register_style( 'mwbusinessadminstyles', plugins_url('/css/mw-business-details.css', __FILE__ ),'','', 'screen' );            wp_enqueue_style( 'mwbusinessadminstyles' );            wp_enqueue_media();            wp_register_script('mw-theme-scripts-admin', plugins_url( '/js/min/theme-min.js', __FILE__ ), array('jquery'), null );            wp_enqueue_script('mw-theme-scripts-admin');        }    }        function settings_link($links, $file) {        $plugin_file = basename(__FILE__);        if (basename($file) == $plugin_file) {            $settings_link = '<a href="options-general.php?page=MW Business Details">Settings</a>';            array_unshift($links, $settings_link);        }        return $links;    }        function mw_theme_options_init(){			// contact details		        register_setting( 'mw_myoption_group', 'autoTracking' );        register_setting( 'mw_myoption_group', 'showTrackingAlert' );        register_setting( 'mw_myoption_group', 'tel_no' );        register_setting( 'mw_myoption_group', 'fax_no' );        register_setting( 'mw_myoption_group', 'alt_no' );        register_setting( 'mw_myoption_group', 'company_no' );        register_setting( 'mw_myoption_group', 'e-mail_address' );        register_setting( 'mw_myoption_group', 'mw-contact-text' );				// address				register_setting( 'mw_myoption_group', 'businessType' );        register_setting( 'mw_myoption_group', 'company_name' );        register_setting( 'mw_myoption_group', 'street_address' );        register_setting( 'mw_myoption_group', 'address_locality' );        register_setting( 'mw_myoption_group', 'address_region' );        register_setting( 'mw_myoption_group', 'post_code' );        // second address        register_setting( 'mw_myoption_group', 'secondAddress' );        register_setting( 'mw_myoption_group', 'second_address_name' );        register_setting( 'mw_myoption_group', 'second_street_address' );        register_setting( 'mw_myoption_group', 'second_address_locality' );        register_setting( 'mw_myoption_group', 'second_address_region' );        register_setting( 'mw_myoption_group', 'second_post_code' );        // logo        register_setting( 'mw_myoption_group', 'business_logo' );        register_setting( 'mw_myoption_group', 'business_logo_id' );        register_setting( 'mw_myoption_group', 'imgWidth' );        register_setting( 'mw_myoption_group', 'imgHeight' );		// google maps		        register_setting( 'mw_myoption_group', 'mapShowPage' );        register_setting( 'mw_myoption_group', 'lat' );        register_setting( 'mw_myoption_group', 'long' );        register_setting( 'mw_myoption_group', 'mapShow' );        register_setting( 'mw_myoption_group', 'zoom' );        register_setting( 'mw_myoption_group', 'mapMarker' );        register_setting( 'mw_myoption_group', 'pin' );        register_setting( 'mw_myoption_group', 'pinImage' );        register_setting( 'mw_myoption_group', 'markerWidth' );        register_setting( 'mw_myoption_group', 'markerHeight' );        register_setting( 'mw_myoption_group', 'radiusDistance' );        register_setting( 'mw_myoption_group', 'showInfoWindow' );        register_setting( 'mw_myoption_group', 'mapStyle' );        register_setting( 'mw_myoption_group', 'customMap' );				// social		        register_setting( 'mw_myoption_group', 'twitter' );        register_setting( 'mw_myoption_group', 'facebook' );        register_setting( 'mw_myoption_group', 'linkedIn' );        register_setting( 'mw_myoption_group', 'googlePlus' );		register_setting( 'mw_myoption_group', 'googleMapsLink' );                // Opening Times                register_setting( 'mw_myoption_group', 'openingTimeFormat' );        register_setting( 'mw_myoption_group', 'twentyFourSeven' );        register_setting( 'mw_myoption_group', 'monFriTimes' );        register_setting( 'mw_myoption_group', 'monday' );        register_setting( 'mw_myoption_group', 'tuesday' );        register_setting( 'mw_myoption_group', 'wednesday' );        register_setting( 'mw_myoption_group', 'thursday' );        register_setting( 'mw_myoption_group', 'friday' );        register_setting( 'mw_myoption_group', 'saturday' );        register_setting( 'mw_myoption_group', 'sunday' );		    } } 